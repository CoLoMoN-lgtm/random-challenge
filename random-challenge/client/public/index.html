<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∏–∫–ª–∏–∫</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .spin { animation: spin 1s linear infinite; }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500">
    <div class="flex flex-col items-center p-4">
        <header class="text-center mb-8 mt-8">
            <h1 class="text-4xl font-bold text-white mb-2 flex items-center justify-center">
                ‚ú® –í–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∏–∫–ª–∏–∫
            </h1>
            <p class="text-white text-xl">–í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ –º–∞–ª–µ–Ω—å–∫—ñ –ø—Ä–∏–≥–æ–¥–∏</p>
        </header>

        <div class="w-full max-w-2xl bg-white rounded-lg shadow-xl p-6">
            <!-- –í–∏–±—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
            <div class="mb-6">
                <label class="flex items-center text-lg text-gray-700 mb-2">
                    üîç –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é:
                </label>
                <div class="flex flex-wrap gap-2" id="categories">
                    <button onclick="selectCategory('all')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-800 text-white" data-category="all">
                        –í—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
                    </button>
                    <button onclick="selectCategory('active')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300" data-category="active">
                        –ê–∫—Ç–∏–≤–Ω—ñ
                    </button>
                    <button onclick="selectCategory('creative')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300" data-category="creative">
                        –¢–≤–æ—Ä—á—ñ
                    </button>
                    <button onclick="selectCategory('social')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300" data-category="social">
                        –°–æ—Ü—ñ–∞–ª—å–Ω—ñ
                    </button>
                    <button onclick="selectCategory('home')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300" data-category="home">
                        –î–æ–º–∞—à–Ω—ñ
                    </button>
                    <button onclick="selectCategory('mindful')" class="category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300" data-category="mindful">
                        –£—Å–≤—ñ–¥–æ–º–ª–µ–Ω—ñ
                    </button>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≤–∏–∫–ª–∏–∫—É -->
            <div class="flex justify-center mb-8">
                <button onclick="getRandomChallenge()" id="generateBtn" class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-4 rounded-full text-xl font-bold shadow-lg hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105 flex items-center">
                    ‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫!
                </button>
            </div>

            <!-- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É -->
            <div id="challengeDisplay" class="hidden animate-fade-in">
                <div id="challengeCard" class="p-6 rounded-lg mb-4 border-l-8">
                    <div class="flex justify-between items-start mb-3">
                        <span id="difficultyBadge" class="text-sm font-medium px-3 py-1 rounded-full">
                        </span>
                        <span id="categoryName" class="text-sm text-gray-600">
                        </span>
                    </div>
                    <h2 id="challengeText" class="text-2xl font-bold text-gray-800"></h2>
                </div>
                
                <div class="flex justify-center">
                    <button onclick="getRandomChallenge()" class="text-purple-600 flex items-center hover:text-purple-800 transition-colors">
                        üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —ñ–Ω—à–∏–π –≤–∏–∫–ª–∏–∫
                    </button>
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –≤–∏–∫–ª–∏–∫—É -->
            <div class="mt-8 text-center">
                <button onclick="toggleForm()" id="toggleFormBtn" class="text-indigo-600 hover:text-indigo-800 flex items-center mx-auto">
                    ‚ûï –î–æ–¥–∞—Ç–∏ —Å–≤—ñ–π –≤–∏–∫–ª–∏–∫
                </button>
            </div>

            <div id="newChallengeForm" class="mt-4 p-4 border border-gray-200 rounded-lg hidden">
                <h3 class="text-lg font-medium text-gray-800 mb-3">–ù–æ–≤–∏–π –≤–∏–∫–ª–∏–∫</h3>
                
                <div class="mb-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        –¢–µ–∫—Å—Ç –≤–∏–∫–ª–∏–∫—É:
                    </label>
                    <input type="text" id="newChallengeText" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="–í–≤–µ–¥—ñ—Ç—å –æ–ø–∏—Å –≤–∏–∫–ª–∏–∫—É">
                </div>
                
                <div class="mb-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        –ö–∞—Ç–µ–≥–æ—Ä—ñ—è:
                    </label>
                    <select id="newChallengeCategory" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
                        <option value="active">–ê–∫—Ç–∏–≤–Ω—ñ</option>
                        <option value="creative">–¢–≤–æ—Ä—á—ñ</option>
                        <option value="social">–°–æ—Ü—ñ–∞–ª—å–Ω—ñ</option>
                        <option value="home">–î–æ–º–∞—à–Ω—ñ</option>
                        <option value="mindful">–£—Å–≤—ñ–¥–æ–º–ª–µ–Ω—ñ</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:
                    </label>
                    <div class="flex flex-wrap gap-3">
                        <label class="flex items-center">
                            <input type="radio" name="difficulty" value="easy" checked class="mr-1">
                            <span class="text-sm px-2 py-1 rounded-full bg-green-200 text-green-800">–õ–µ–≥–∫–∏–π</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="difficulty" value="medium" class="mr-1">
                            <span class="text-sm px-2 py-1 rounded-full bg-yellow-200 text-yellow-800">–°–µ—Ä–µ–¥–Ω—ñ–π</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="difficulty" value="hard" class="mr-1">
                            <span class="text-sm px-2 py-1 rounded-full bg-red-200 text-red-800">–°–∫–ª–∞–¥–Ω–∏–π</span>
                        </label>
                    </div>
                </div>
                
                <button onclick="addNewChallenge()" class="w-full bg-indigo-600 text-white py-2 rounded-md hover:bg-indigo-700 transition-colors">
                    –ó–±–µ—Ä–µ–≥—Ç–∏ –≤–∏–∫–ª–∏–∫
                </button>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å -->
        <div class="mt-8 text-white text-center max-w-2xl">
            <p class="mb-2 font-medium">üíæ –°—Ç–∞—Ç–∏—á–Ω–∞ –≤–µ—Ä—Å—ñ—è</p>
            <p class="text-sm opacity-80">
                –ü—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ –∑ —Ç–µ—Å—Ç–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏. –î–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –±–µ–∫–µ–Ω–¥.
            </p>
        </div>
    </div>

    <script>
        // URL –≤–∞—à–æ–≥–æ –±–µ–∫–µ–Ω–¥—É - —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ Render URL!
        const API_URL = 'https://random-challenge.onrender.com/api';
        
        // –õ–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ —è–∫ —Ä–µ–∑–µ—Ä–≤
        const fallbackChallenges = {
            active: [
                { text: '–ü—Ä–æ–π–¥—ñ—Ç—å—Å—è –Ω–∞ —Å–≤—ñ–∂–æ–º—É –ø–æ–≤—ñ—Ç—Ä—ñ –ø—Ä–æ—Ç—è–≥–æ–º 15 —Ö–≤–∏–ª–∏–Ω', difficulty: 'easy' },
                { text: '–í–∏–∫–æ–Ω–∞–π—Ç–µ 10 –ø—Ä–∏—Å—ñ–¥–∞–Ω—å –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑', difficulty: 'medium' },
                { text: '–ó—Ä–æ–±—ñ—Ç—å 5-—Ö–≤–∏–ª–∏–Ω–Ω—É –∑–∞—Ä—è–¥–∫—É', difficulty: 'easy' },
                { text: '–ü—ñ–¥–Ω—ñ–º–∞–π—Ç–µ—Å—è —Å—Ö–æ–¥–∞–º–∏ –∑–∞–º—ñ—Å—Ç—å –ª—ñ—Ñ—Ç–∞', difficulty: 'easy' },
                { text: '–í–∏–∫–æ–Ω–∞–π—Ç–µ 20 –≤—ñ–¥–∂–∏–º–∞–Ω—å', difficulty: 'hard' }
            ],
            creative: [
                { text: '–ù–∞–º–∞–ª—é–π—Ç–µ —â–æ—Å—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ª–∏—à–µ —Ç—Ä–∏ –∫–æ–ª—å–æ—Ä–∏', difficulty: 'medium' },
                { text: '–ù–∞–ø–∏—à—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –≤—ñ—Ä—à –ø—Ä–æ —Å–≤—ñ–π –¥–µ–Ω—å', difficulty: 'medium' },
                { text: '–°—Ç–≤–æ—Ä—ñ—Ç—å –æ—Ä–∏–≥–∞–º—ñ –∑ –ø–∞–ø–µ—Ä—É', difficulty: 'hard' },
                { text: '–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—É–π—Ç–µ —â–æ—Å—å –Ω–µ–∑–≤–∏—á–∞–π–Ω–µ', difficulty: 'easy' }
            ],
            social: [
                { text: '–ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–æ–º—É –¥—Ä—É–≥—É', difficulty: 'easy' },
                { text: '–ü–æ–¥–∑–≤–æ–Ω—ñ—Ç—å —Ä—ñ–¥–Ω–∏–º', difficulty: 'easy' },
                { text: '–ü–æ–∑–Ω–∞–π–æ–º—Ç–µ—Å—è –∑ –Ω–æ–≤–æ—é –ª—é–¥–∏–Ω–æ—é', difficulty: 'hard' },
                { text: '–ó—Ä–æ–±—ñ—Ç—å –∫–æ–º–ø–ª—ñ–º–µ–Ω—Ç –Ω–µ–∑–Ω–∞–π–æ–º—Ü—é', difficulty: 'medium' }
            ],
            home: [
                { text: '–ü—Ä–∏–≥–æ—Ç—É–π—Ç–µ –Ω–æ–≤–∏–π —Ä–µ—Ü–µ–ø—Ç', difficulty: 'medium' },
                { text: '–ü—Ä–∏–±—Ä–∞–π—Ç–µ –æ–¥–∏–Ω —è—â–∏–∫ –∞–±–æ –ø–æ–ª–∏—Ü—é', difficulty: 'easy' },
                { text: '–ü–æ–ª–∏–π—Ç–µ –≤—Å—ñ —Ä–æ—Å–ª–∏–Ω–∏ –≤ –¥–æ–º—ñ', difficulty: 'easy' },
                { text: '–†–µ–æ—Ä–≥–∞–Ω—ñ–∑—É–π—Ç–µ —Å–≤—ñ–π —Ä–æ–±–æ—á–∏–π —Å—Ç—ñ–ª', difficulty: 'medium' }
            ],
            mindful: [
                { text: '–ü—Ä–æ–≤–µ–¥—ñ—Ç—å 5 —Ö–≤–∏–ª–∏–Ω —É –º–µ–¥–∏—Ç–∞—Ü—ñ—ó', difficulty: 'easy' },
                { text: '–ó–∞–ø–∏—à—ñ—Ç—å 3 —Ä–µ—á—ñ, –∑–∞ —è–∫—ñ –≤–¥—è—á–Ω—ñ', difficulty: 'easy' },
                { text: '–ü–æ—Å–ª—É—Ö–∞–π—Ç–µ —É–ª—é–±–ª–µ–Ω—É –ø—ñ—Å–Ω—é –∑ –∑–∞–∫—Ä–∏—Ç–∏–º–∏ –æ—á–∏–º–∞', difficulty: 'easy' },
                { text: '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≥–ª–∏–±–æ–∫–µ –¥–∏—Ö–∞–Ω–Ω—è 2 —Ö–≤–∏–ª–∏–Ω–∏', difficulty: 'easy' }
            ]
        };

        const fallbackCategories = {
            active: { name: '–ê–∫—Ç–∏–≤–Ω—ñ', color: 'bg-red-500' },
            creative: { name: '–¢–≤–æ—Ä—á—ñ', color: 'bg-purple-500' },
            social: { name: '–°–æ—Ü—ñ–∞–ª—å–Ω—ñ', color: 'bg-blue-500' },
            home: { name: '–î–æ–º–∞—à–Ω—ñ', color: 'bg-green-500' },
            mindful: { name: '–£—Å–≤—ñ–¥–æ–º–ª–µ–Ω—ñ', color: 'bg-yellow-500' }
        };

        let selectedCategory = 'all';
        let challenges = {};
        let categories = {};
        let apiConnected = false;

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ API
        async function loadDataFromAPI() {
            try {
                console.log('–°–ø—Ä–æ–±–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ API...');
                
                // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
                const categoriesResponse = await fetch(`${API_URL}/categories`);
                if (!categoriesResponse.ok) throw new Error('Categories request failed');
                const categoriesData = await categoriesResponse.json();
                
                // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –≤–∏–∫–ª–∏–∫–∏
                const challengesResponse = await fetch(`${API_URL}/challenges`);
                if (!challengesResponse.ok) throw new Error('Challenges request failed');
                const challengesData = await challengesResponse.json();
                
                // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –¥–∞–Ω—ñ API —É –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç
                categories = {};
                categoriesData.forEach(cat => {
                    categories[cat._id] = {
                        name: cat.name,
                        color: cat.color || 'bg-gray-500'
                    };
                });
                
                challenges = {};
                challengesData.forEach(challenge => {
                    if (!challenges[challenge.categoryId]) {
                        challenges[challenge.categoryId] = [];
                    }
                    challenges[challenge.categoryId].push({
                        id: challenge._id,
                        text: challenge.text,
                        difficulty: challenge.difficulty,
                        category: challenge.categoryId
                    });
                });
                
                apiConnected = true;
                updateConnectionStatus('–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ API! –î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ –±–∞–∑–∏.');
                console.log('API –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ');
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ API:', error);
                apiConnected = false;
                challenges = fallbackChallenges;
                categories = fallbackCategories;
                updateConnectionStatus('–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å API.');
            }
        }

        function updateConnectionStatus(message) {
            const statusElement = document.querySelector('.mt-8.text-white p:last-child');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }

        function selectCategory(category) {
            selectedCategory = category;
            
            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
            document.querySelectorAll('.category-btn').forEach(btn => {
                const btnCategory = btn.getAttribute('data-category');
                if (btnCategory === category) {
                    btn.className = 'category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-800 text-white';
                } else {
                    btn.className = 'category-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-gray-200 text-gray-800 hover:bg-gray-300';
                }
            });
        }

        async function getRandomChallenge() {
            const btn = document.getElementById('generateBtn');
            btn.innerHTML = 'üîÑ <span class="spin inline-block">‚ü≥</span> –ì–µ–Ω–µ—Ä—É—î–º–æ...';
            btn.disabled = true;

            try {
                if (apiConnected) {
                    // –°–ø—Ä–æ–±—É—î–º–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ –∑ API
                    const url = selectedCategory === 'all' 
                        ? `${API_URL}/challenges/random`
                        : `${API_URL}/challenges/random?category=${selectedCategory}`;
                    
                    const response = await fetch(url);
                    
                    if (response.ok) {
                        const challenge = await response.json();
                        displayChallenge({
                            id: challenge._id,
                            text: challenge.text,
                            difficulty: challenge.difficulty,
                            category: challenge.categoryId
                        });
                        btn.innerHTML = '‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫!';
                        btn.disabled = false;
                        return;
                    } else if (response.status === 404) {
                        console.log('API –ø–æ–≤–µ—Ä–Ω—É–≤ 404 - –±–∞–∑–∞ –ø–æ—Ä–æ–∂–Ω—è, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –¥–∞–Ω—ñ...');
                        await initializeApiData();
                        // –°–ø—Ä–æ–±—É—î–º–æ —â–µ —Ä–∞–∑ –ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
                        const retryResponse = await fetch(url);
                        if (retryResponse.ok) {
                            const challenge = await retryResponse.json();
                            displayChallenge({
                                id: challenge._id,
                                text: challenge.text,
                                difficulty: challenge.difficulty,
                                category: challenge.categoryId
                            });
                            btn.innerHTML = '‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫!';
                            btn.disabled = false;
                            return;
                        }
                    }
                }
                
                // Fallback –¥–æ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
                setTimeout(() => {
                    let allChallenges = [];
                    
                    if (selectedCategory === 'all') {
                        Object.keys(fallbackChallenges).forEach(cat => {
                            fallbackChallenges[cat].forEach(challenge => {
                                allChallenges.push({...challenge, category: cat});
                            });
                        });
                    } else {
                        if (fallbackChallenges[selectedCategory]) {
                            fallbackChallenges[selectedCategory].forEach(challenge => {
                                allChallenges.push({...challenge, category: selectedCategory});
                            });
                        }
                    }

                    if (allChallenges.length > 0) {
                        const randomChallenge = allChallenges[Math.floor(Math.random() * allChallenges.length)];
                        displayChallenge(randomChallenge);
                        updateConnectionStatus('–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ (–±–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –ø–æ—Ä–æ–∂–Ω—è)');
                    }

                    btn.innerHTML = '‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫!';
                    btn.disabled = false;
                }, 500);
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É:', error);
                btn.innerHTML = '‚ú® –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–∫–ª–∏–∫!';
                btn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö –≤ API
        async function initializeApiData() {
            try {
                console.log('–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –¥–∞–Ω—ñ –≤ API...');
                
                // –°–ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞—î–º–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
                const categoriesToAdd = [
                    { _id: 'active', name: '–ê–∫—Ç–∏–≤–Ω—ñ', color: 'bg-red-500' },
                    { _id: 'creative', name: '–¢–≤–æ—Ä—á—ñ', color: 'bg-purple-500' },
                    { _id: 'social', name: '–°–æ—Ü—ñ–∞–ª—å–Ω—ñ', color: 'bg-blue-500' },
                    { _id: 'home', name: '–î–æ–º–∞—à–Ω—ñ', color: 'bg-green-500' },
                    { _id: 'mindful', name: '–£—Å–≤—ñ–¥–æ–º–ª–µ–Ω—ñ', color: 'bg-yellow-500' }
                ];

                for (const category of categoriesToAdd) {
                    try {
                        await fetch(`${API_URL}/categories`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(category)
                        });
                    } catch (e) {
                        // –ö–∞—Ç–µ–≥–æ—Ä—ñ—è –≤–∂–µ –º–æ–∂–µ —ñ—Å–Ω—É–≤–∞—Ç–∏
                    }
                }

                // –ü–æ—Ç—ñ–º –¥–æ–¥–∞—î–º–æ –≤–∏–∫–ª–∏–∫–∏
                const challengesToAdd = [
                    { text: '–ü—Ä–æ–π–¥—ñ—Ç—å—Å—è –Ω–∞ —Å–≤—ñ–∂–æ–º—É –ø–æ–≤—ñ—Ç—Ä—ñ –ø—Ä–æ—Ç—è–≥–æ–º 15 —Ö–≤–∏–ª–∏–Ω', categoryId: 'active', difficulty: 'easy' },
                    { text: '–í–∏–∫–æ–Ω–∞–π—Ç–µ 10 –ø—Ä–∏—Å—ñ–¥–∞–Ω—å –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑', categoryId: 'active', difficulty: 'medium' },
                    { text: '–ù–∞–º–∞–ª—é–π—Ç–µ —â–æ—Å—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ª–∏—à–µ —Ç—Ä–∏ –∫–æ–ª—å–æ—Ä–∏', categoryId: 'creative', difficulty: 'medium' },
                    { text: '–ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–æ–º—É –¥—Ä—É–≥—É', categoryId: 'social', difficulty: 'easy' },
                    { text: '–ü—Ä–∏–≥–æ—Ç—É–π—Ç–µ –Ω–æ–≤–∏–π —Ä–µ—Ü–µ–ø—Ç', categoryId: 'home', difficulty: 'medium' },
                    { text: '–ü—Ä–æ–≤–µ–¥—ñ—Ç—å 5 —Ö–≤–∏–ª–∏–Ω —É –º–µ–¥–∏—Ç–∞—Ü—ñ—ó', categoryId: 'mindful', difficulty: 'easy' }
                ];

                for (const challenge of challengesToAdd) {
                    try {
                        await fetch(`${API_URL}/challenges`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(challenge)
                        });
                    } catch (e) {
                        console.log('–ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É:', e);
                    }
                }

                console.log('–î–∞–Ω—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ API');
                updateConnectionStatus('API –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ! –î–∞–Ω—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ.');
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó API:', error);
            }
        }

        function displayChallenge(challenge) {
            const display = document.getElementById('challengeDisplay');
            const card = document.getElementById('challengeCard');
            const text = document.getElementById('challengeText');
            const badge = document.getElementById('difficultyBadge');
            const categoryName = document.getElementById('categoryName');

            text.textContent = challenge.text;
            
            // –†—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
            const difficultyClasses = {
                easy: 'bg-green-200 text-green-800',
                medium: 'bg-yellow-200 text-yellow-800',
                hard: 'bg-red-200 text-red-800'
            };
            const difficultyNames = {
                easy: '–õ–µ–≥–∫–∏–π',
                medium: '–°–µ—Ä–µ–¥–Ω—ñ–π', 
                hard: '–°–∫–ª–∞–¥–Ω–∏–π'
            };
            
            badge.className = `text-sm font-medium px-3 py-1 rounded-full ${difficultyClasses[challenge.difficulty]}`;
            badge.textContent = difficultyNames[challenge.difficulty];

            // –ö–∞—Ç–µ–≥–æ—Ä—ñ—è
            categoryName.textContent = categories[challenge.category]?.name || '–í–ª–∞—Å–Ω–∏–π';
            
            // –ö–æ–ª—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
            const categoryColor = categories[challenge.category]?.color || 'bg-gray-500';
            card.className = `p-6 rounded-lg mb-4 border-l-8 border-${categoryColor.split('-')[1]}-500`;

            display.classList.remove('hidden');
        }

        function toggleForm() {
            const form = document.getElementById('newChallengeForm');
            const btn = document.getElementById('toggleFormBtn');
            
            if (form.classList.contains('hidden')) {
                form.classList.remove('hidden');
                btn.innerHTML = '‚ûñ –°–∫–∞—Å—É–≤–∞—Ç–∏';
            } else {
                form.classList.add('hidden');
                btn.innerHTML = '‚ûï –î–æ–¥–∞—Ç–∏ —Å–≤—ñ–π –≤–∏–∫–ª–∏–∫';
            }
        }

        async function addNewChallenge() {
            const text = document.getElementById('newChallengeText').value;
            const category = document.getElementById('newChallengeCategory').value;
            const difficulty = document.querySelector('input[name="difficulty"]:checked').value;

            if (!text || !category) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è');
                return;
            }

            const newChallenge = {
                text: text,
                categoryId: category,
                difficulty: difficulty
            };

            try {
                if (apiConnected) {
                    // –°–ø—Ä–æ–±—É—î–º–æ –∑–±–µ—Ä–µ–≥—Ç–∏ –≤ API
                    const response = await fetch(`${API_URL}/challenges`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(newChallenge)
                    });
                    
                    if (response.ok) {
                        const savedChallenge = await response.json();
                        
                        // –û–Ω–æ–≤–ª—é—î–º–æ –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ
                        if (!challenges[category]) {
                            challenges[category] = [];
                        }
                        challenges[category].push({
                            id: savedChallenge._id,
                            text: savedChallenge.text,
                            difficulty: savedChallenge.difficulty,
                            category: savedChallenge.categoryId
                        });
                        
                        displayChallenge({
                            id: savedChallenge._id,
                            text: savedChallenge.text,
                            difficulty: savedChallenge.difficulty,
                            category: savedChallenge.categoryId
                        });
                        
                        // –û—á–∏—â—É—î–º–æ —Ñ–æ—Ä–º—É
                        document.getElementById('newChallengeText').value = '';
                        document.getElementById('newChallengeCategory').value = '';
                        document.querySelector('input[name="difficulty"][value="easy"]').checked = true;
                        toggleForm();
                        
                        alert('–í–∏–∫–ª–∏–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö!');
                        return;
                    }
                }
                
                // Fallback - –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ
                if (!challenges[category]) {
                    challenges[category] = [];
                }
                
                const localChallenge = {
                    text: text,
                    category: category,
                    difficulty: difficulty
                };
                
                challenges[category].push(localChallenge);
                
                // –û—á–∏—â—É—î–º–æ —Ñ–æ—Ä–º—É
                document.getElementById('newChallengeText').value = '';
                document.getElementById('newChallengeCategory').value = '';
                document.querySelector('input[name="difficulty"][value="easy"]').checked = true;
                toggleForm();
                
                displayChallenge(localChallenge);
                alert('–í–∏–∫–ª–∏–∫ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ API)');
                
            } catch (error) {
                console.error('–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∏–∫–ª–∏–∫—É:', error);
                alert('–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
            }
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        window.addEventListener('load', function() {
            loadDataFromAPI();
        });
    </script>
</body>
</html>
